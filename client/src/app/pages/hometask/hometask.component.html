<app-navbar></app-navbar>

<div class="homeContainer">
    <!-- <button (click)="taskIdGen()">click me</button> -->
    <div class="menuDiv">
        <div id="btnSpaceTop"></div>
        <mat-button-toggle-group value="tasks">
            <mat-button-toggle class="menuBtn" value="tasks">Tasks</mat-button-toggle>
            <mat-button-toggle class="menuBtn" id="menuBtnCallendar">Callendar</mat-button-toggle>
        </mat-button-toggle-group>
        <div id="btnSpaceBottom"></div>
    </div>
    <div class="homeDiv">
        <div class="infoDiv">
            <h1 id="funcTitle">Project Name</h1>
            <p class="projInfo">Priority: <span id="priorContent">HIGH</span></p>
            <p class="projInfo">Due date: <span id="dateContent">17 March 2023</span></p>
            <div class="userDiv">
                <div class="usrIcon">
                    <i id="icon1" class="fa-sharp fa-solid fa-user fa-2xl" id="icon"></i>
                </div>
                <div class="usrIcon1">
                    <i class="fa-sharp fa-solid fa-user fa-2xl"></i>
                </div>
                <div class="usrIcon2">
                    <i class="fa-sharp fa-solid fa-user fa-2xl"></i>
                </div>
                <div class="addUsr">
                    <i class="fa-sharp fa-solid fa-user-plus fa-lg"></i>
                </div>
            </div>
        </div>
        <div class="todoMainDiv" cdkDropListGroup>
            <div class="dragContainer">
                <div class="taskTitleDiv">
                    <div class="taskDiv">
                        <p class="taskTitle">Todo</p>
                        <span class="task-col-count" *ngIf="todoList.length > 0"
                          style="border-radius: 50%;background-color: #90CAF9;width: 10%;text-align: center;font-size: 20px;">{{todoList.length}}</span>
                        <!-- <i class="fa-solid fa-ellipsis-vertical fa-xl" mat-button [matMenuTriggerFor]="menu" id="todoMenu"></i> -->
                    </div>
                </div>
                <div class="addTaskDiv" (click)="dialogAddTaskOpen('400ms', '500ms')">
                    <p id="addTask">+  Add New Task</p>
                </div>
                <div
                    cdkDropList
                    [cdkDropListData]="todoList"
                    class="todoLists"
                    (cdkDropListDropped)="drop($event, 'todo')">

                    <div class="taskBox" *ngFor="let item of todoList" cdkDragBoundary=".todoMainDiv" cdkDrag (click)="dialogTaskInfoOpen('400ms', '500ms', item.task_id)">
                        <mat-card class="todoCard">
                            <mat-card-header class="cardTitle">{{item.name}}</mat-card-header>
                            <mat-card-content class="cardInfo">Description: {{item.description}}</mat-card-content>
                            <mat-card-content class="cardInfo">Due date: {{item.deadline}}</mat-card-content>
                            <mat-card-actions class="cardAct">
                                <img src="https://www.pngkit.com/png/detail/301-3012694_account-user-profile-avatar-comments-fa-user-circle.png" class="userImg" alt="usrImg">
                                <div class="commentDiv">
                                    <span>{{item.comment_count}}</span>
                                    <i class="fa-sharp fa-solid fa-comment fa-xl" id="commentSpace"></i>
                                </div>
                            </mat-card-actions>
                        </mat-card>
                    </div>
                </div>
            </div>

            <div class="dragContainer">
                <div class="taskTitleDiv">
                    <div class="taskDiv">
                        <p class="taskTitle">In Progress</p>
                        <span class="task-col-count" *ngIf="inProgressList.length > 0"
                          style="border-radius: 50%;background-color: #FFF59D;width: 10%;text-align: center;font-size: 20px;">{{inProgressList.length}}</span>
                        <!-- <i class="fa-solid fa-ellipsis-vertical fa-xl" mat-button [matMenuTriggerFor]="menu" id="todoMenu"></i> -->
                    </div>
                </div>
                <div
                    cdkDropList
                    [cdkDropListData]="inProgressList"
                    class="todoLists"
                    (cdkDropListDropped)="drop($event, 'inPogress')">
                    <div class="taskBox" *ngFor="let item of inProgressList" cdkDragBoundary=".todoMainDiv" cdkDrag (click)="dialogTaskInfoOpen('400ms', '500ms', item.task_id)">
                        <mat-card class="todoCard">
                            <mat-card-header class="cardTitle">{{item.name}}</mat-card-header>
                            <mat-card-content class="cardInfo">Description: {{item.description}}</mat-card-content>
                            <mat-card-content class="cardInfo">Due date: {{item.deadline}}</mat-card-content>
                            <mat-card-actions class="cardAct">
                                <img src="https://www.pngkit.com/png/detail/301-3012694_account-user-profile-avatar-comments-fa-user-circle.png" class="userImg" alt="usrImg">
                                <div class="commentDiv">
                                    <span>{{item.comment_count}}</span>
                                    <i class="fa-sharp fa-solid fa-comment fa-xl" id="commentSpace"></i>
                                </div>
                            </mat-card-actions>
                        </mat-card>
                    </div>
                </div>
            </div>

            <div class="dragContainer">
                <div class="taskTitleDiv">
                    <div class="taskDiv">
                        <p class="taskTitle">Completed</p>
                        <span class="task-col-count" *ngIf="completeList.length > 0"
                          style="border-radius: 50%;background-color: #81C784;width: 10%;text-align: center;font-size: 20px;">{{completeList.length}}</span>
                        <!-- <i class="fa-solid fa-ellipsis-vertical fa-xl" mat-button [matMenuTriggerFor]="menu" id="todoMenu"></i> -->
                    </div>
                </div>
                <div
                    cdkDropList
                    [cdkDropListData]="completeList"
                    class="todoLists"
                    (cdkDropListDropped)="drop($event, 'completed')">
                    <div class="taskBox" *ngFor="let item of completeList" cdkDragBoundary=".todoMainDiv" cdkDrag (click)="dialogTaskInfoOpen('400ms', '500ms', item.task_id)">
                        <mat-card class="todoCard">
                            <mat-card-header class="cardTitle">{{item.name}}</mat-card-header>
                            <mat-card-content class="cardInfo">Description: {{item.description}}</mat-card-content>
                            <mat-card-content class="cardInfo">Due date: {{item.deadline}}</mat-card-content>
                            <mat-card-actions class="cardAct">
                                <img src="https://www.pngkit.com/png/detail/301-3012694_account-user-profile-avatar-comments-fa-user-circle.png" class="userImg" alt="usrImg">
                                <div class="commentDiv">
                                    <span>{{item.comment_count}}</span>
                                    <i class="fa-sharp fa-solid fa-comment fa-xl" id="commentSpace"></i>
                                </div>
                            </mat-card-actions>
                        </mat-card>
                    </div>
                </div>
            </div>

            <div class="dragContainer">
                <div class="taskTitleDiv">
                    <div class="taskDiv">
                        <p class="taskTitle">Due</p>
                        <span class="task-col-count" *ngIf="dueList.length > 0"
                          style="border-radius: 50%;background-color: #4DD0E1;width: 10%;text-align: center;font-size: 20px;">{{dueList.length}}</span>
                        <!-- <i class="fa-solid fa-ellipsis-vertical fa-xl" mat-button [matMenuTriggerFor]="menu" id="todoMenu"></i> -->
                    </div>
                </div>
                <div
                    cdkDropList
                    [cdkDropListData]="dueList"
                    class="todoLists"
                    (cdkDropListDropped)="drop($event, 'due')">
                    <div class="taskBox" *ngFor="let item of dueList" cdkDragBoundary=".todoMainDiv" cdkDrag (click)="dialogTaskInfoOpen('400ms', '500ms', item.task_id)">
                        <mat-card class="todoCard">
                            <mat-card-header class="cardTitle">{{item.name}}</mat-card-header>
                            <mat-card-content class="cardInfo">Description: {{item.description}}</mat-card-content>
                            <mat-card-content class="cardInfo">Due date: {{item.deadline}}</mat-card-content>
                            <mat-card-actions class="cardAct">
                                <img src="https://www.pngkit.com/png/detail/301-3012694_account-user-profile-avatar-comments-fa-user-circle.png" class="userImg" alt="usrImg">
                                <div class="commentDiv">
                                    <span>{{item.comment_count}}</span>
                                    <i class="fa-sharp fa-solid fa-comment fa-xl" id="commentSpace"></i>
                                </div>
                            </mat-card-actions>
                        </mat-card>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
